<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SCC Food Safety Map</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" integrity="sha512-h9FcoyWjHcOcmEVkxOfTLnmZFWIH0iZhZT1H2TbOq55xssQGEJHEaIm+PgoUaZbRvQTNTluNOEfb1ZRy6D3BOw==" crossorigin="anonymous" referrerpolicy="no-referrer">
  <link rel="stylesheet" href="css/app.css">
</head>
<body>
  <header id="header">
    <h1>SCC Food Safety Map</h1>
    <span class="stat-badge-wrap">
      <button id="info-btn" class="info-btn" aria-label="About this data">&#x24D8;</button>
      <div id="info-panel" class="stat-dropdown info-panel" style="display:none">
        <div class="info-panel-content">
          <div class="info-section">
            <div class="info-heading">Data source</div>
            <div>Food facility inspection data from Santa Clara County Dept. of Environmental Health, published on the
              <a href="https://data.sccgov.org/Health/SCC_DEH_Food_Data_INSPECTIONS/2u2d-8jej" target="_blank" rel="noopener">county open data portal</a>.</div>
          </div>
          <div class="info-section">
            <div class="info-heading">Inspection scores</div>
            <div><span class="info-dot" style="background:var(--green)"></span> <strong>Green</strong> (85+) &mdash; Pass</div>
            <div><span class="info-dot" style="background:var(--yellow)"></span> <strong>Yellow</strong> (70&ndash;84) &mdash; Conditional pass</div>
            <div><span class="info-dot" style="background:var(--red)"></span> <strong>Red</strong> (&lt;70) &mdash; Closure</div>
          </div>
          <div class="info-section" id="info-freshness"></div>
        </div>
      </div>
    </span>
    <div id="stats-bar">
      <span id="stat-facilities">— facilities</span>
      <span class="stat-badge-wrap"><span id="stat-yellow" class="stat-badge badge-y">— yellow</span></span>
      <span class="stat-badge-wrap"><span id="stat-red" class="stat-badge badge-r">— closed</span></span>
      <span class="stat-badge-wrap" id="closures-wrap">
        <span id="stat-closures" class="stat-badge badge-r">— closures</span>
        <span id="closures-periods" class="period-chips">
          <button class="period-chip" data-days="7">1w</button>
          <button class="period-chip" data-days="30">1m</button>
          <button class="period-chip" data-days="182">6m</button>
          <button class="period-chip active" data-days="365">1y</button>
        </span>
      </span>
      <span id="stat-freshness" class="stat-freshness"></span>
    </div>
  </header>

  <main id="main">
    <aside id="sidebar" class="hidden">
      <button id="sidebar-close" aria-label="Close">✕</button>
      <div id="sidebar-content"></div>
    </aside>
    <div id="map"></div>
  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js" integrity="sha512-puJW3E/qXDqYp9IfhAI54BJEaWIfloJ7JWs7OeD5i6ruC9JZL1gERT1wjtwXFlh7CjE7ZJ+/vcRZRkIYIb6p4g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script type="module" src="js/app.js"></script>
</body>
</html>
